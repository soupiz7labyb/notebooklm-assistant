# –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

## –û—à–∏–±–∫–∞ WebSocket / HMR –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

–ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫–∏:
```
[vite] failed to connect to websocket
Access to script at 'http://localhost:5173/@crx/client-worker' from origin 'chrome-extension://...' has been blocked by CORS policy
```

### –ü—Ä–∏—á–∏–Ω–∞

Chrome —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∏ –Ω–µ –º–æ–≥—É—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ WebSocket —Å–µ—Ä–≤–µ—Ä—É Vite –¥–ª—è HMR (Hot Module Replacement). –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ.

### –†–µ—à–µ–Ω–∏–µ

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `npm run dev` –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—É—Å–∫–∞–µ—Ç `vite build --watch` –≤–º–µ—Å—Ç–æ dev server. –≠—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–ª—é—á–∞–µ—Ç HMR –∏ WebSocket.

–ï—Å–ª–∏ –≤—ã –≤—Å–µ –µ—â–µ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫–∏ WebSocket:

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∫–æ–º–∞–Ω–¥—É:**
   ```bash
   npm run dev  # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç build --watch (–±–µ–∑ WebSocket)
   ```
   –í–º–µ—Å—Ç–æ:
   ```bash
   npm run dev:serve  # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç dev server (—Å WebSocket, –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
   ```

2. **–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ:**
   - –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–±–µ—Ä–µ—Ç—Å—è (watch mode)
   - –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤ `chrome://extensions/` (–∫–Ω–æ–ø–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è üîÑ)

3. **–ï—Å–ª–∏ –æ—à–∏–±–∫–∏ –≤—Å–µ –µ—â–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è:**
   - –ò–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ –∏—Ö - –æ–Ω–∏ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `npm run build` –¥–ª—è production —Å–±–æ—Ä–∫–∏

**–í–∞–∂–Ω–æ:** –î–ª—è Chrome —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `build --watch` –≤–º–µ—Å—Ç–æ dev server, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º —Å WebSocket/HMR.

### –†–µ—à–µ–Ω–∏–µ 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å production —Å–±–æ—Ä–∫—É –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –º–µ—à–∞–µ—Ç —Ä–∞–±–æ—Ç–µ:

```bash
npm run build
```

–ó–∞—Ç–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç–µ –ø–∞–ø–∫—É `dist` –≤ Chrome. –≠—Ç–æ –æ—Ç–∫–ª—é—á–∏—Ç HMR, –Ω–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ.

### –†–µ—à–µ–Ω–∏–µ 3: –û—Ç–∫–ª—é—á–∏—Ç—å HMR –≤ dev —Ä–µ–∂–∏–º–µ

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å dev —Ä–µ–∂–∏–º –±–µ–∑ HMR, –º–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å `vite.config.ts`:

```typescript
export default defineConfig({
  plugins: [react(), crx({ manifest })],
  server: {
    hmr: false, // –û—Ç–∫–ª—é—á–∏—Ç—å HMR
  },
  // ...
});
```

–ù–æ —ç—Ç–æ –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ –ø–æ—Ç–µ—Ä—è–µ—Ç–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ hot reload.

## –î—Ä—É–≥–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã–ø–æ–ª–Ω–∏–ª–∏ `npm run dev` –∏–ª–∏ `npm run build`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–∞–ø–∫–∞ `dist` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
3. –í `chrome://extensions/` –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—à–∏–±–∫–∏ (–∫—Ä–∞—Å–Ω–∞—è –∏–∫–æ–Ω–∫–∞)

### –ò–∫–æ–Ω–∫–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª—ã `icons/icon*.png` —Å—É—â–µ—Å—Ç–≤—É—é—Ç
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç–∏ –≤ `src/manifest.json`
3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ

### Side Panel –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ –º–∞–Ω–∏—Ñ–µ—Å—Ç–µ –µ—Å—Ç—å `sidePanel` permission
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `side_panel.default_path` —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏ JavaScript

### OAuth –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Client ID –≤ `src/manifest.json`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–æ–±–∞–≤–∏–ª–∏ redirect URI –≤ Google Cloud Console
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Extension ID –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
